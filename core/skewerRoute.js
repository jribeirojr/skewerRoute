/* skewerRoute.JS 1.0.0 by Rafael Alves  - https://github.com/ralves87 */
var directionsDisplay;var map;var directionsService;var config;var myDestination;function set_geolocation(){directionsDisplay=new google.maps.DirectionsRenderer();var b=new google.maps.LatLng();var c={BlackAndWhite:[{stylers:[{hue:"#424242"},{saturation:-120}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],PaleDawn:[{featureType:"water",stylers:[{visibility:"on"},{color:"#acbcc9"}]},{featureType:"landscape",stylers:[{color:"#f2e5d4"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#c5c6c6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#e4d7c6"}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#fbfaf7"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#c5dac6"}]},{featureType:"administrative",stylers:[{visibility:"on"},{lightness:33}]},{featureType:"road"},{featureType:"poi.park",elementType:"labels",stylers:[{visibility:"on"},{lightness:20}]},{},{featureType:"road",stylers:[{lightness:20}]}],Commander:[{featureType:"water",stylers:[{color:"#021019"}]},{featureType:"landscape",stylers:[{color:"#08304b"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#0c4152"},{lightness:5}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#0b434f"},{lightness:25}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#0b3d51"},{lightness:16}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.stroke",stylers:[{color:"#000000"},{lightness:13}]},{featureType:"transit",stylers:[{color:"#146474"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#144b53"},{lightness:14},{weight:1.4}]}],BlueWater:[{featureType:"water",stylers:[{color:"#46bcec"},{visibility:"on"}]},{featureType:"landscape",stylers:[{color:"#f2f2f2"}]},{featureType:"road",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"poi",stylers:[{visibility:"off"}]}],BrightBubbly:[{featureType:"water",stylers:[{color:"#19a0d8"}]},{featureType:"administrative",elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{weight:6}]},{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#e85113"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-40}]},{featureType:"road.arterial",elementType:"geometry.stroke",stylers:[{color:"#efe9e4"},{lightness:-20}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"road.highway",elementType:"labels.icon"},{featureType:"landscape",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"landscape",stylers:[{lightness:20},{color:"#efe9e4"}]},{featureType:"landscape.man_made",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{lightness:-100}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{hue:"#11ff00"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{lightness:100}]},{featureType:"poi",elementType:"labels.icon",stylers:[{hue:"#4cff00"},{saturation:58}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"on"},{color:"#f0e4d3"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-25}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#efe9e4"},{lightness:-10}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"simplified"}]}],NeutralBlue:[{featureType:"water",elementType:"geometry",stylers:[{color:"#193341"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2c5a71"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#29768a"},{lightness:-37}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#406d80"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#406d80"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#3e606f"},{weight:2},{gamma:0.84}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{featureType:"administrative",elementType:"geometry",stylers:[{weight:0.6},{color:"#1a3541"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#2c5a71"}]}],Greyscale:[{featureType:"all",stylers:[{saturation:-100},{gamma:0.5}]}],VitaminC:[{featureType:"water",elementType:"geometry",stylers:[{color:"#004358"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#1f8a70"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#1f8a70"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#fd7400"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#1f8a70"},{lightness:-20}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#1f8a70"},{lightness:-17}]},{elementType:"labels.text.stroke",stylers:[{color:"#ffffff"},{visibility:"on"},{weight:0.9}]},{elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#ffffff"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"simplified"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#1f8a70"},{lightness:-10}]},{},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#1f8a70"},{weight:0.7}]}]};var a={zoom:5,mapTypeId:google.maps.MapTypeId.ROADMAP,center:b,styles:c[config.theme],panControl:config.controls.navigate,zoomControl:config.controls.zoom,mapTypeControl:config.controls.type,scaleControl:config.controls.scale,streetViewControl:config.controls.streetview,overviewMapControl:config.controls.overview,scrollwheel:config.controls.scrollwheel};map=new google.maps.Map(document.getElementById("skewerRoute"),a);directionsDisplay.setMap(map);if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(d){var g=new google.maps.LatLng(d.coords.latitude,d.coords.longitude);if(config.route==""){myDestination=g}else{myDestination=""+config.route+""}var f={origin:g,destination:myDestination,travelMode:google.maps.DirectionsTravelMode.DRIVING};directionsDisplay.setMap(map);directionsDisplay.setOptions({suppressMarkers:true});var e=new google.maps.Marker({map:map,position:g,animation:google.maps.Animation.DROP,icon:""+config.marker.pointA+""});google.maps.event.addListener(e,"click",function(){var h=""+this.position.ob+", "+this.position.pb+"";var i={origin:h,destination:myDestination,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(i,function(j,k){if(k==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(j)}});return false});directionsService=new google.maps.DirectionsService();directionsService.route(f,function(i,h){if(h==google.maps.DirectionsStatus.OK){var j=new google.maps.Geocoder();j.geocode({address:myDestination},function(m,k){var l=new google.maps.Marker({map:map,animation:google.maps.Animation.DROP,position:new google.maps.LatLng(m[0].geometry.location.lat(),m[0].geometry.location.lng()),icon:""+config.marker.pointB+""})});directionsDisplay.setDirections(i)}else{$("#skewerRoute").css({width:$("#skewerRoute").parent().width(),height:$("#skewerRoute").parent().height(),background:"rgba(0, 0, 0, 0.8)"});$("#skewerRoute").parent().prepend("<div style='position: absolute; color: #C1c1c1; margin: -80px 0 0 -230px; text-transform: uppercase; font-size: 12px; -webkit-border-radius: 10px; -moz-border-radius: 10px; border-radius: 10px; background: #FFF; z-index: 1; padding: 50px; left: 50%; top: 50%; font-family: sans-serif; -webkit-box-shadow: 3px -5px 15px rgba(0, 0, 0, 0.51); -moz-box-shadow:3px -5px 15px rgba(0, 0, 0, 0.51); box-shadow:3px -5px 15px rgba(0, 0, 0, 0.51);'>OPS! N\u00e3o foi poss\u00edvel localizar o endere\u00e7o informado.</div>")}document.getElementById("skewerRoute").style.visibility="visible"})})}else{handleNoGeolocation(false)}}(function(a){a.fn.skewerRoute=function(f,b,h,c){var e=a.extend({active:false,showTime:5000},c);var d=a.extend({pointA:"",pointB:"",pointC:""},h);var g=a.extend({navigate:true,zoom:true,type:true,scale:true,streetview:true,overview:true,scrollwheel:true},b);config=a.extend({keyAPI:"",sensor:false,controls:g,theme:"",route:"",marker:d,newRoute:e},f);return this.each(function(){var k=a(this);function j(m,n){var l=document.createElement("script");l.type="text/javascript";if(n){l.onload=n}document.getElementsByTagName("head")[0].appendChild(l);l.src=m}if(config.keyAPI==""){j("http://maps.googleapis.com/maps/api/js?v=3&sensor="+config.sensor+"&callback=set_geolocation")}else{j("http://maps.googleapis.com/maps/api/js?v=3?key="+config.keyAPI+"&sensor="+config.sensor+"&callback=set_geolocation")}k.css({position:"relative"});k.append("<div id='skewerRoute' style='height:100%; width:100%;'></div>");if(config.newRoute.active==true){k.append('<div class="help" style="-webkit-box-shadow:0 0 30px rgba(39, 74, 91,.5);-moz-box-shadow:0 0 30px rgba(39, 74, 91,.5);box-shadow:0 0 30px rgba(39, 74, 91,.5);position:absolute;bottom:0;left:10px;padding:20px;background:url('+config.marker.pointA+') no-repeat 0 20px #274a5b;width:30%;border:1px solid #274a5b; -moz-opacity:0.00; -khtml-opacity:0.00; opacity:0.00; -ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=0); filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0); filter:alpha(opacity=0);"><p style="display:block;font-family:sans-serif;color:#FFF;margin:10px 0 20px;font-size:100%; padding-left:40px;">Sua localiza\u00e7\u00e3o n\u00e3o est\u00e1 correta? Voc\u00ea pode criar uma nova rota digitando seu endere\u00e7o atual.</p><input type="text" name="address" placeholder="Digite o endere\u00e7o" style="padding:10px;width:65%;font-family:sans-serif;color:#274a5b;text-transform:uppercase;font-size:15px;float:left;background:#FFF;height:20.5px;border:0;font-weight:700;"><a class="button-help" style="display:block;float:left;width:20%;height:21.2px;background:#ff2b00;padding:10px;text-align:center;text-transform:uppercase;color:#FFF;font-family:sans-serif;text-decoration:none;" href="#">OK</a></div>');setTimeout(function(){k.find(".help").animate({bottom:"5%",opacity:"1"},800)},config.newRoute.showTime);k.append('<div class="alert" style="display:none; -webkit-box-shadow: rgba(39, 74, 91, 0.498039) 0px 0px 30px; box-shadow: rgba(39, 74, 91, 0.498039) 0px 0px 30px; position: absolute; top: 5%; left: 10px; padding:10px; background-color: rgb(39, 74, 91); width: 20%; border: 1px solid rgb(39, 74, 91);"><p style="display:block;font-family:sans-serif;color:#FFF;margin:0;font-size:70%;">Voc\u00ea pode alternar entre as rotas clicando em cada ponto marcado.</p></div>')}function i(){var l={origin:a("input[name=address]").val(),destination:myDestination,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(l,function(m,n){if(n==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(m)}})}a(".button-help").on("click",function(){a(".alert").fadeIn("slow",function(){setTimeout(function(){a(".alert").removeClass().fadeOut()},5000)});var l=new google.maps.Geocoder();l.geocode({address:jQuery("input[name=address]").val(),region:"no"},function(o,m){if(m.toLowerCase()=="ok"){var q=new google.maps.LatLng(o[0]["geometry"]["location"].lat(),o[0]["geometry"]["location"].lng());map.setCenter(q);var n=new google.maps.Marker({map:map,position:q,animation:google.maps.Animation.DROP,icon:""+config.marker.pointC+""});google.maps.event.addListener(n,"click",function(){var r=""+this.position.ob+", "+this.position.pb+"";var s={origin:r,destination:myDestination,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(s,function(t,u){if(u==google.maps.DirectionsStatus.OK){directionsDisplay.setDirections(t)}});return false});var p=function(s){var r=markers[s];r.setMap(null)}}});i();return false})})}})(jQuery);